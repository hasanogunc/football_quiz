<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futbol Quiz 2025</title>
    <style>
        /* --- YENƒ∞ TASARIM (DARK STADIUM THEME) --- */
        :root {
            --primary: #047857; /* Koyu Z√ºmr√ºt */
            --primary-light: #10b981;
            --secondary: #064e3b; 
            --danger: #ef4444; 
            --warning: #f59e0b; 
            --bg-dark: #022c22;
            --text: #1f2937; 
            --text-light: #f9fafb;
            --empty: #9CA3AF;
            --selected: #0284c7; /* Mavi se√ßim */
            --accent: #fbbf24; /* Altƒ±n Sarƒ±sƒ± */
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text);
            margin: 0; display: flex; justify-content: center; align-items: center;
            min-height: 100vh; padding: 20px;
            
            /* Saha Deseni Efekti */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 0%, transparent 60%),
                repeating-linear-gradient(0deg, transparent, transparent 49px, rgba(255,255,255,0.03) 50px);
            background-size: 100% 100%, 100% 100px;
        }

        .app-container {
            background: rgba(255, 255, 255, 0.98); /* Hafif transparan beyaz */
            width: 100%; max-width: 600px;
            border-radius: 24px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1);
            overflow: hidden; position: relative; min-height: 650px;
            display: flex; flex-direction: column; transition: max-width 0.3s ease;
            backdrop-filter: blur(10px);
        }

        /* Y√úKLENƒ∞YOR EKRANI */
        #loading-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 50;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; text-align: center;
        }
        .spinner {
            border: 4px solid #f3f3f3; border-top: 4px solid var(--primary);
            border-radius: 50%; width: 50px; height: 50px;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .status-text { font-size: 0.9rem; color: #666; margin-bottom: 10px; }
        .error-log { 
            font-family: monospace; font-size: 0.75rem; color: #dc2626; 
            background: #fee2e2; padding: 10px; border-radius: 5px; 
            width: 90%; max-height: 100px; overflow-y: auto; text-align: left;
            margin-top: 10px; display: none;
        }

        /* EKRANLAR */
        .screen { display: none; padding: 30px; flex: 1; flex-direction: column; align-items: center; justify-content: center; text-align: center; animation: fadeIn 0.4s ease; position: relative; }
        .screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h1 { 
            color: var(--primary); margin-bottom: 10px; 
            font-weight: 800; text-transform: uppercase; letter-spacing: -0.5px;
            text-shadow: 0 2px 10px rgba(4, 120, 87, 0.1);
        }
        h2 { color: var(--secondary); }
        
        .name-input {
            width: 80%; padding: 15px; border: 2px solid #e5e7eb; border-radius: 12px;
            font-size: 1.1rem; margin-bottom: 20px; text-align: center; font-family: inherit;
            transition: all 0.3s; background: #f9fafb; color: #374151;
        }
        .name-input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1); background: white; }

        .btn {
            background: linear-gradient(145deg, var(--primary-light), var(--primary));
            color: white; border: none;
            padding: 16px 30px; border-radius: 16px; font-size: 1.1rem;
            cursor: pointer; width: 100%; margin: 8px 0; font-weight: bold;
            transition: all 0.2s; font-family: inherit;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .btn:active { transform: scale(0.98); }
        .btn:hover { filter: brightness(1.1); transform: translateY(-1px); }
        
        .btn-subject { 
            background: white; color: var(--text); 
            border: 2px solid #e5e7eb; 
            text-transform: capitalize; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; gap: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn-subject:hover { 
            border-color: var(--primary); color: var(--primary); 
            background: #f0fdf4; box-shadow: 0 5px 15px rgba(4, 120, 87, 0.15);
        }
        
        .score-badge {
            font-size: 0.75rem; background: var(--accent); color: #78350f; 
            padding: 2px 8px; border-radius: 12px; font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Liderlik Tablosu Butonu */
        .btn-leaderboard {
            background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            color: white; margin-top: 15px; font-size: 1rem;
            box-shadow: 0 4px 10px rgba(217, 119, 6, 0.3);
        }
        .btn-leaderboard:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(217, 119, 6, 0.4); }

        /* GENEL SINAV BUTONU */
        .btn-general-exam {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); /* ≈ûampiyonlar Ligi Mavisi */
            color: white; border: none; padding: 25px; margin-bottom: 20px;
            font-size: 1.3rem; box-shadow: 0 10px 20px -5px rgba(30, 58, 138, 0.4);
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            border-radius: 20px;
        }
        .btn-general-exam:hover { transform: translateY(-3px); box-shadow: 0 15px 25px -5px rgba(30, 58, 138, 0.5); }
        .general-score-badge {
            background: rgba(255,255,255,0.25); font-size: 0.9rem; padding: 4px 12px; border-radius: 15px; font-weight: normal;
        }

        /* Sƒ±navƒ± Bitir Butonu - CSS ile gizlendi */
        .btn-finish-exam { display: none; }

        /* ≈ûIK BUTONLARI */
        .btn-option {
            background-color: #ffffff; color: var(--text); border: 2px solid #e5e7eb;
            text-align: left; position: relative; transition: all 0.2s;
            display: flex; flex-direction: column;
            align-items: flex-start; justify-content: center;
            min-height: 60px;
            width: 100%;
            margin-bottom: 12px;
            padding: 12px 20px;
            border-radius: 16px;
            font-family: inherit;
            box-shadow: 0 2px 0 #e5e7eb;
        }
        .btn-option:hover { background-color: #f0fdf4; border-color: var(--primary-light); transform: translateY(-1px); }
        .btn-option:active { transform: translateY(1px); box-shadow: none; }
        
        .btn-option.selected { 
            background-color: #eff6ff; border-color: var(--selected); color: #075985; 
            box-shadow: 0 0 0 2px var(--selected) inset; font-weight: bold;
        }
        .btn-option.correct-review { background-color: #ecfdf5; border-color: var(--primary); color: var(--primary); }
        .btn-option.wrong-review { background-color: #fef2f2; border-color: var(--danger); color: var(--danger); }
        
        .btn-option:disabled { cursor: not-allowed; opacity: 0.8; }
        .btn-option.selected:disabled { opacity: 1; }

        /* NAVƒ∞GASYON BUTONLARI */
        .nav-buttons {
            display: flex; justify-content: space-between; width: 100%; margin-top: 20px; gap: 15px;
        }
        .btn-nav {
            background-color: #f3f4f6; color: #374151; flex: 1; padding: 15px;
            font-size: 1rem; border-radius: 14px; border: none; cursor: pointer;
            font-weight: bold; font-family: inherit; transition: all 0.2s;
            box-shadow: 0 2px 0 #d1d5db;
        }
        .btn-nav:hover { background-color: #e5e7eb; transform: translateY(-1px); }
        .btn-nav:active { transform: translateY(1px); box-shadow: none; }
        
        .btn-nav.primary { 
            background: linear-gradient(145deg, var(--primary-light), var(--primary)); 
            color: white; box-shadow: 0 4px 10px rgba(4, 120, 87, 0.3); border: none;
        }
        .btn-nav.primary:hover { filter: brightness(1.1); }
        .btn-nav:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

        /* √úST √áUBUK */
        .top-bar { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; font-weight: 800; font-size: 1.2rem; align-items: center; }
        .timer-box { color: var(--danger); font-variant-numeric: tabular-nums; background: #fef2f2; padding: 5px 10px; border-radius: 10px; } 
        .score-box { color: var(--primary); }
        
        .home-btn-corner {
            position: absolute; top: 20px; right: 20px;
            background: #f3f4f6; color: #4b5563; border: none;
            width: 40px; height: 40px; border-radius: 12px;
            cursor: pointer; font-size: 1.3rem; display: flex; align-items: center; justify-content: center;
            z-index: 10; transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .home-btn-corner:hover { background: #e5e7eb; color: #1f2937; transform: scale(1.05); }

        .back-to-results-btn {
            position: absolute; top: 20px; left: 20px;
            background: var(--primary); color: white; border: none;
            padding: 10px 18px; border-radius: 12px;
            cursor: pointer; font-size: 0.9rem; font-weight: bold;
            display: none; z-index: 10; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* SONU√á ƒ∞STATƒ∞STƒ∞KLERƒ∞ VE Lƒ∞STESƒ∞ */
        .stats-container {
            display: flex; gap: 15px; width: 100%; justify-content: center; margin: 25px 0;
        }
        .stat-box {
            flex: 1; padding: 20px 10px; border-radius: 16px; text-align: center;
            color: white; font-weight: bold; display: flex; flex-direction: column; gap: 5px;
            cursor: default; transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .stat-box.correct { background: linear-gradient(135deg, #059669, #047857); }
        .stat-box.wrong { background: linear-gradient(135deg, #dc2626, #991b1b); }
        .stat-box.empty { background: linear-gradient(135deg, #9ca3af, #4b5563); }
        .stat-box span { font-size: 1.8rem; }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 12px; width: 100%; margin-top: 20px; margin-bottom: 20px;
        }
        .q-result-item {
            width: 100%; aspect-ratio: 1;
            display: flex; align-items: center; justify-content: center;
            border-radius: 12px; font-weight: bold; color: white;
            cursor: pointer; transition: transform 0.2s; font-size: 1.1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .q-result-item:hover { transform: scale(1.15); z-index: 2; }
        .q-result-item.correct { background-color: var(--primary); }
        .q-result-item.wrong { background-color: var(--danger); }
        .q-result-item.empty { background-color: var(--empty); }

        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(5px);
            display: none; justify-content: center; align-items: center; z-index: 100;
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 24px; width: 85%;
            text-align: center; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
            max-height: 80vh; overflow-y: auto;
        }

        .question-text { 
            font-size: 1.35rem; font-weight: 700; margin-bottom: 25px; width: 100%; 
            text-align: left; line-height: 1.5; color: #111827;
        }

        .progress-bar { width: 100%; height: 10px; background: #f3f4f6; border-radius: 10px; margin-bottom: 25px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary-light), var(--primary)); width: 0%; border-radius: 10px; transition: width 0.3s; }
        
        .review-banner {
            background-color: #FEF3C7; color: #92400e; padding: 12px; width: 100%;
            text-align: center; font-weight: bold; font-size: 0.95rem; margin-bottom: 20px;
            border-radius: 12px; display: none; border: 1px solid #fcd34d;
        }

        /* Liderlik Tablosu Stilleri */
        .leaderboard-table {
            width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.95rem;
        }
        .leaderboard-table th {
            background-color: #f3f4f6; color: #374151; padding: 12px; text-align: left; font-weight: bold;
            border-bottom: 2px solid #e5e7eb;
        }
        .leaderboard-table td {
            padding: 12px; border-bottom: 1px solid #e5e7eb; text-align: left;
        }
        .leaderboard-table tr:nth-child(even) { background-color: #f9fafb; }
        .leaderboard-table tr:hover { background-color: #f0fdf4; }
        
        .rank-1 { color: #d97706; font-weight: bold; font-size: 1.1rem; } /* Altƒ±n */
        .rank-2 { color: #4b5563; font-weight: bold; } /* G√ºm√º≈ü */
        .rank-3 { color: #92400e; font-weight: bold; } /* Bronz */

        /* --- MASA√úST√ú / GENƒ∞≈û EKRAN --- */
        @media (min-width: 1024px) {
            .app-container { max-width: 950px; min-height: 650px; padding: 50px; }

            #quiz-screen.active {
                display: grid;
                grid-template-columns: 1fr;
                gap: 25px;
                padding-top: 30px; 
            }
            #subject-buttons { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 100%; }
            .btn-general-exam { grid-column: 1 / -1; margin-bottom: 30px; }
        }
    </style>
</head>
<body>

    <div class="app-container">

        <!-- Y√úKLEME EKRANI -->
        <div id="loading-screen">
            <div class="spinner"></div>
            <h2>Ba≈ülama Vuru≈üu Yapƒ±lƒ±yor...</h2>
            <p id="status-text" class="status-text">Sorular y√ºkleniyor...</p>
            <div id="error-log" class="error-log"></div>
            <button id="retry-btn" class="btn" style="display:none; background:#4b5563; font-size:0.9rem;" onclick="location.reload()">üîÑ Tekrar Dene</button>
            <button id="demo-btn" class="btn" style="display:none; background:#f59e0b; font-size:0.9rem;" onclick="useDemoData()">‚ö†Ô∏è Demo Modu ile A√ß</button>
        </div>

        <!-- ANA MEN√ú -->
        <div id="home-screen" class="screen">
            <h1>‚öΩ Futbol Quiz 2025</h1>
            
            <input type="text" id="player-name" class="name-input" placeholder="Adƒ±nƒ±zƒ± Yazƒ±nƒ±z..." maxlength="25">

            <p style="color: #6b7280; font-weight: 500;">Bilgini test etmek i√ßin bir kategori se√ß:</p>
            <br>
            <button id="btn-general-main" class="btn btn-general-exam" onclick="startGeneralExam()">
                <div>üèÜ KARI≈ûIK 20 SORU BA≈ûLAT</div>
            </button>
            <div style="width:100%; height:1px; background:#e5e7eb; margin:15px 0;"></div>
            <div id="subject-buttons" style="width:100%;"></div>
            
            <!-- Liderlik Tablosu Butonu -->
            <button class="btn btn-leaderboard" onclick="openLeaderboard()">
                üèÖ Liderlik Tablosu
            </button>

            <div style="margin-top:20px; font-size:0.8rem; color:#9ca3af; font-weight: 500;">
                Toplam <span id="total-q-count">0</span> futbol sorusu y√ºklendi.
            </div>
        </div>

        <!-- SINAV EKRANI -->
        <div id="quiz-screen" class="screen">
            <button class="home-btn-corner" onclick="openHomeModal()" title="Ana Men√º">üè†</button>
            <button id="back-to-results-btn" class="back-to-results-btn" onclick="returnToResults()">üîô Sonu√ßlara D√∂n</button>
            
            <div id="review-banner" class="review-banner">üìù Yanlƒ±≈ü Cevap ƒ∞nceleme Modu</div>
            <div class="top-bar">
                <div class="timer-box">‚è±Ô∏è <span id="time-display">00:00</span></div>
                <div class="score-box" style="visibility: hidden;">Puan: <span id="score-display">0</span></div>
            </div>
            <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
            
            <!-- SORU METNƒ∞ -->
            <div class="question-text" id="question-text"></div>
            
            <div id="options-container" style="width: 100%;"></div>

            <div class="nav-buttons">
                <button class="btn-nav" id="prev-btn" onclick="prevQuestion()">‚¨ÖÔ∏è √ñnceki</button>
                <button class="btn-nav primary" id="next-btn" onclick="nextQuestion()">Sonraki ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- SONU√á EKRANI -->
        <div id="result-screen" class="screen">
            <h1>üì¢ Ma√ß Bitti!</h1>
            <div class="stats-container">
                <div class="stat-box correct"><span id="res-correct">0</span> Gol (D)</div>
                <div class="stat-box wrong" id="wrong-box" onclick="startReview()" title="Yanlƒ±≈ülarƒ±nƒ± incelemek i√ßin tƒ±kla">
                    <span id="res-wrong">0</span> Ofsayt (Y)
                    <div style="font-size:0.7rem; opacity:0.8; margin-top:2px;">(ƒ∞ncelemek i√ßin tƒ±kla)</div>
                </div>
                <div class="stat-box empty"><span id="res-empty">0</span> Bo≈ü</div>
            </div>
            <div style="width:100%; margin-top:10px; margin-bottom:5px; font-weight:bold; font-size:0.9rem;">Ma√ß √ñzeti (Tƒ±klayƒ±n):</div>
            <div id="result-list-container" class="result-grid"></div>

            <h2>Toplam Puan: <span id="final-score">0</span></h2>
            <p id="feedback-text"></p>
            <p id="save-status" style="font-size:0.8rem; color:#666; margin-top:5px; min-height: 20px;"></p>
            <button class="btn" onclick="goHome()">Ana Men√ºye D√∂n</button>
        </div>

        <!-- S√úRE SE√áƒ∞M MODALI -->
        <div id="timer-modal" class="modal-overlay">
            <div class="modal-content">
                <h3>‚è±Ô∏è Ma√ß S√ºresi</h3>
                <p>Toplam sƒ±nav s√ºresi soru ba≈üƒ±na 10 saniye olarak ayarlanacaktƒ±r.</p>
                <button class="btn" onclick="confirmStart(true)">Ma√ßa Ba≈üla</button>
            </div>
        </div>

        <!-- Bƒ∞Tƒ∞RME UYARI MODALI -->
        <div id="finish-warning-modal" class="modal-overlay">
            <div class="modal-content">
                <h3>‚ö†Ô∏è Bo≈ü Sorular Var!</h3>
                <p>Hen√ºz i≈üaretlemediƒüin sorular var. S√ºre i≈ülemeye devam ediyor.</p>
                <button class="btn" style="background-color:#EF4444;" onclick="finishExamForce()">Ma√ßƒ± Bitir</button>
                <button class="btn" style="background-color:var(--primary); margin-top:10px" onclick="goToFirstEmpty()">Bo≈ü Soruya D√∂n</button>
            </div>
        </div>

        <!-- Lƒ∞DERLƒ∞K TABLOSU MODALI -->
        <div id="leaderboard-modal" class="modal-overlay">
            <div class="modal-content">
                <h3>üèÜ En ƒ∞yi Skorlar</h3>
                <div id="leaderboard-loading">Y√ºkleniyor...</div>
                <table class="leaderboard-table" id="leaderboard-content" style="display:none;">
                    <thead>
                        <tr>
                            <th style="width: 10%;">#</th>
                            <th>Oyuncu</th>
                            <th>Kategori</th>
                            <th>Puan</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <!-- Veriler buraya gelecek -->
                    </tbody>
                </table>
                <button class="btn" style="margin-top: 20px; background-color: #6B7280;" onclick="closeLeaderboard()">Kapat</button>
            </div>
        </div>

        <!-- ANA MEN√ú √áIKI≈û ONAY MODALI -->
        <div id="home-confirm-modal" class="modal-overlay">
            <div class="modal-content">
                <h3>‚ö†Ô∏è Sahadan √áƒ±kƒ±≈ü</h3>
                <p>Sƒ±navƒ± sonlandƒ±rƒ±p ana men√ºye d√∂nmek istediƒüinize emin misiniz?</p>
                <button class="btn" style="background-color:#EF4444;" onclick="goHomeForce()">Evet, √áƒ±k</button>
                <button class="btn" style="background-color:#6B7280; margin-top:10px" onclick="closeHomeModal()">Hayƒ±r, Devam Et</button>
            </div>
        </div>

    </div>

    <script>
        // --- AYARLAR ---
        const SHEET_ID = "2PACX-1vQDVN7YKeVt8ImVQuQVXJ0oC2SvmQKDbEDIXvyS9VJ9Ysz7EAjAcXZBiVyQkIQgZ5wQ9wxtQr3Str9t";
        const timeStamp = new Date().getTime(); 
        const SHEET_CSV_URL = `https://docs.google.com/spreadsheets/d/e/${SHEET_ID}/pub?output=csv&gid=0&v=${timeStamp}`;
        
        // Google Apps Script URL
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxze4oPoXLNDfTSRJvyl8VE-EOjCv8ekaKA9cOdZPBQ9EVfSCe1mQinjtv1sTstCcnC/exec";

        // --- DEƒûƒ∞≈ûKENLER ---
        let allQuestions = [];
        let currentQuestions = [];
        let userAnswers = []; 
        let currentIndex = 0;
        let score = 0;
        let timer;
        let timeLeft;
        let isTimerRunning = false;
        
        let selectedLesson = null;
        let isGeneralExam = false; 
        let playerName = ""; 
        
        let isReviewMode = false;
        let isSequentialReview = false; 
        let wrongQuestionIndices = []; 
        let reviewStep = 0; 

        let isEmptyReviewMode = false;
        let emptyIndicesToReview = [];
        let emptyReviewStep = 0;

        // --- FETCH HELPER (G√ú√áLENDƒ∞Rƒ∞LMƒ∞≈û PROXY YAPISI) ---
        function fetchWithProxies(targetUrl, responseType, onSuccess, onError) {
            // Timestamp ekle
            const sep = targetUrl.includes('?') ? '&' : '?';
            const urlWithTs = targetUrl + sep + "v=" + new Date().getTime();

            // AllOrigins "get" metodu redirectleri sunucu tarafƒ±nda √ß√∂zer. En g√ºvenlisi budur.
            // "raw" metodu redirectte takƒ±labilir.
            const allOriginsUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(urlWithTs)}`;
            
            // Diƒüer proxy'ler
            const corsProxyUrl = `https://corsproxy.io/?${encodeURIComponent(urlWithTs)}`;
            const codeTabsUrl = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(urlWithTs)}`;

            // Deneme sƒ±rasƒ±
            const queue = [
                { url: allOriginsUrl, type: 'wrapper' }, // √ñncelik AllOrigins Wrapper
                { url: corsProxyUrl, type: 'direct' },
                { url: codeTabsUrl, type: 'direct' },
                { url: urlWithTs, type: 'direct' } // Son √ßare direkt
            ];
            
            let currentIdx = 0;

            function tryNext() {
                if (currentIdx >= queue.length) {
                    if (onError) onError("T√ºm sunucular denendi, baƒülantƒ± ba≈üarƒ±sƒ±z.");
                    return;
                }

                const item = queue[currentIdx];
                currentIdx++;

                console.log(`Veri √ßekiliyor (${item.type}):`, item.url);

                fetch(item.url)
                    .then(res => {
                        if (!res.ok) throw new Error("HTTP " + res.status);
                        return res.json(); // Her zaman JSON bekle (allorigins de json d√∂ner)
                    })
                    .then(data => {
                        // Eƒüer Wrapper ise (allorigins), asƒ±l veri 'contents' i√ßindedir.
                        if (item.type === 'wrapper') {
                            if (!data.contents) throw new Error("Wrapper bo≈ü veri d√∂nd√ºrd√º");
                            
                            // Eƒüer beklenen responseType JSON ise ve contents string geldiyse parse et
                            if (responseType === 'json' && typeof data.contents === 'string') {
                                try {
                                    onSuccess(JSON.parse(data.contents));
                                } catch (e) {
                                    // Belki de string isteniyordur ama JSON denedik
                                    onSuccess(data.contents);
                                }
                            } else {
                                onSuccess(data.contents);
                            }
                        } else {
                            // Direct proxy (corsproxy vb.) direkt sonucu d√∂ner
                            onSuccess(data);
                        }
                    })
                    // Eƒüer direct proxy JSON d√∂nd√ºrmediyse (√∂rneƒüin CSV i√ßin text lazƒ±msa)
                    // Yukarƒ±daki .json() patlar. Bu y√ºzden text fallback yapalƒ±m.
                    .catch(err => {
                        if (item.type === 'direct' && responseType === 'text') {
                            // JSON parse hatasƒ± aldƒ±ysak ve text istiyorsak tekrar dene
                            fetch(item.url).then(r => r.text()).then(t => onSuccess(t)).catch(() => tryNext());
                        } else {
                            console.warn(`Proxy hatasƒ± (${item.url}):`, err);
                            tryNext();
                        }
                    });
            }

            tryNext();
        }

        // --- BA≈ûLANGI√á ---
        window.onload = function() { 
            document.getElementById('status-text').innerText = "Veriler √áekiliyor...";
            
            // CSV verisi text olduƒüu i√ßin √∂zel i≈ülem
            fetchWithProxies(SHEET_CSV_URL, 'text', 
                (csvText) => {
                    // AllOrigins wrap ederse JSON i√ßinden string gelir, direct gelirse string gelir.
                    // fetchWithProxies bunu halleder.
                    if (typeof csvText !== 'string') {
                        // Bazen JSON objesi gelebilir (eƒüer sunucu hata mesajƒ± d√∂nd√ºyse)
                        csvText = JSON.stringify(csvText);
                    }
                    
                    const questions = parseCSV(csvText);
                    if (questions.length > 0) {
                        allQuestions = questions;
                        initApp();
                    } else {
                        document.getElementById('error-log').innerText = "Veri formatƒ± hatalƒ± veya bo≈ü.";
                        document.getElementById('error-log').style.display = 'block';
                    }
                },
                (errorMsg) => {
                    document.getElementById('status-text').innerText = "Baƒülantƒ± Ba≈üarƒ±sƒ±z.";
                    document.getElementById('status-text').style.color = "red";
                    document.getElementById('error-log').innerHTML = errorMsg;
                    document.getElementById('error-log').style.display = 'block';
                    document.getElementById('retry-btn').style.display = 'inline-block';
                    document.getElementById('demo-btn').style.display = 'inline-block';
                }
            );
        };

        // --- CSV AYRI≈ûTIRICI ---
        function parseCSV(text) {
            if (!text || text.length < 10) return [];
            const rawLines = text.trim().split(/\r\n|\n|\r/);
            const lines = [];
            let buffer = "";
            for (let i = 0; i < rawLines.length; i++) {
                let line = rawLines[i];
                if (buffer) buffer += "\n" + line; else buffer = line;
                const quoteCount = (buffer.match(/"/g) || []).length;
                if (quoteCount % 2 === 0) { lines.push(buffer); buffer = ""; }
            }
            
            const result = [];
            
            for (let i = 1; i < lines.length; i++) {
                const row = lines[i];
                if (!row || row.length < 5) continue; 
                const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                const clean = cols.map(c => {
                    if (!c) return "";
                    let val = c.trim();
                    if (val.startsWith('"') && val.endsWith('"')) val = val.slice(1, -1).replace(/""/g, '"');
                    return val;
                });
                
                if (clean.length < 7 || !clean[2]) continue;

                let category = clean[1] || "Genel";
                let catSlug = category.toLowerCase().replace(/\s+/g, '-');
                
                let rawCorrect = clean[7] ? clean[7].trim().toUpperCase() : "0";
                let correctIdx = 0;
                if(rawCorrect === "A" || rawCorrect === "0") correctIdx = 0;
                else if(rawCorrect === "B" || rawCorrect === "1") correctIdx = 1;
                else if(rawCorrect === "C" || rawCorrect === "2") correctIdx = 2;
                else if(rawCorrect === "D" || rawCorrect === "3") correctIdx = 3;

                result.push({
                    id: clean[0] || i,
                    lesson: catSlug,
                    lessonDisplay: category,
                    text: clean[2],
                    options: [clean[3] || "A", clean[4] || "B", clean[5] || "C", clean[6] || "D"],
                    correct: correctIdx,
                    time: parseInt(clean[8]) || 30, 
                    hintText: clean[9] || "Bu soru i√ßin ipucu yok.",
                    points: 10
                });
            }
            return result;
        }

        // --- SKOR KAYIT Sƒ∞STEMƒ∞ (Yerel) ---
        function saveResult(lessonSlug, score) {
            localStorage.setItem('fq25_score_' + lessonSlug, score);
        }

        function getResult(lessonSlug) {
            return localStorage.getItem('fq25_score_' + lessonSlug);
        }

        // --- SKOR KAYIT Sƒ∞STEMƒ∞ (Bulut - Google Sheets) ---
        function saveScoreToCloud(name, score, category) {
            const statusEl = document.getElementById('save-status');
            statusEl.innerText = "Skor kaydediliyor...";
            
            const formData = new FormData();
            formData.append('isim', name);
            formData.append('puan', score);
            formData.append('kategori', category);

            // POST i≈ülemi i√ßin proxy kullanmaya gerek yok (no-cors)
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                body: formData,
                mode: 'no-cors' 
            })
            .then(() => {
                console.log("Skor ba≈üarƒ±yla g√∂nderildi.");
                statusEl.innerText = `Skorunuz (${score}) ba≈üarƒ±yla kaydedildi! ‚úÖ`;
                statusEl.style.color = "green";
            })
            .catch(error => {
                console.error("Skor g√∂nderim hatasƒ±:", error);
                statusEl.innerText = "Skor kaydedilemedi (Baƒülantƒ± hatasƒ±). ‚ùå";
                statusEl.style.color = "red";
            });
        }

        // --- Lƒ∞DERLƒ∞K TABLOSU GETƒ∞RME ---
        function openLeaderboard() {
            document.getElementById('leaderboard-modal').style.display = 'flex';
            document.getElementById('leaderboard-loading').style.display = 'block';
            document.getElementById('leaderboard-content').style.display = 'none';
            document.getElementById('leaderboard-loading').innerText = "Y√ºkleniyor...";
            
            fetchWithProxies(GOOGLE_SCRIPT_URL, 'json', 
                (data) => {
                    renderLeaderboard(data);
                },
                (errorMsg) => {
                    console.error("Liderlik tablosu hatasƒ±:", errorMsg);
                    document.getElementById('leaderboard-loading').innerHTML = "Veriler y√ºklenemedi.<br>L√ºtfen daha sonra tekrar deneyin.";
                }
            );
        }

        function closeLeaderboard() {
            document.getElementById('leaderboard-modal').style.display = 'none';
        }

        function renderLeaderboard(data) {
            document.getElementById('leaderboard-loading').style.display = 'none';
            document.getElementById('leaderboard-content').style.display = 'table';
            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';

            // Veri kontrol√º (bazen bo≈ü dizi veya hatalƒ± nesne gelebilir)
            if(!data || !Array.isArray(data) || data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4">Hen√ºz kayƒ±t yok.</td></tr>';
                return;
            }

            data.forEach((row, index) => {
                const tr = document.createElement('tr');
                let rankClass = "";
                if(index === 0) rankClass = "rank-1";
                if(index === 1) rankClass = "rank-2";
                if(index === 2) rankClass = "rank-3";

                tr.innerHTML = `
                    <td class="${rankClass}">${index + 1}</td>
                    <td style="font-weight:600;">${row.name || row.isim}</td>
                    <td style="color:#666;">${row.category || row.kategori}</td>
                    <td style="font-weight:bold; color:var(--primary);">${row.score || row.puan}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- ƒ∞Sƒ∞M KONTROL√ú ---
        function checkName() {
            const input = document.getElementById('player-name');
            const val = input.value.trim();
            if (!val) {
                alert("L√ºtfen ma√ßa ba≈ülamadan √∂nce adƒ±nƒ±zƒ± yazƒ±n! üìù");
                input.focus();
                return false;
            }
            playerName = val;
            return true;
        }

        // --- UYGULAMA BA≈ûLATMA ---
        function initApp() {
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('home-screen').classList.add('active');
            document.getElementById('total-q-count').innerText = allQuestions.length;

            const generalScore = getResult('general_exam');
            const generalBtn = document.getElementById('btn-general-main');
            if(generalScore !== null) {
                const oldBadge = generalBtn.querySelector('.general-score-badge');
                if(oldBadge) oldBadge.remove();
                
                const badge = document.createElement('div');
                badge.className = 'general-score-badge';
                badge.innerText = `Son Skor: ${generalScore}`;
                generalBtn.appendChild(badge);
            }

            const subjects = [...new Set(allQuestions.map(q => q.lessonDisplay))];
            const btnContainer = document.getElementById('subject-buttons');
            btnContainer.innerHTML = '';

            subjects.forEach(subj => {
                const btn = document.createElement('button');
                btn.className = 'btn btn-subject';
                
                const sampleQ = allQuestions.find(q => q.lessonDisplay === subj);
                const lessonSlug = sampleQ ? sampleQ.lesson : "";
                
                const titleSpan = document.createElement('span');
                titleSpan.innerText = "‚öΩ " + subj;
                btn.appendChild(titleSpan);

                const savedScore = getResult(lessonSlug);
                if (savedScore !== null) {
                    const badge = document.createElement('span');
                    badge.className = 'score-badge';
                    badge.innerText = `Son Skor: ${savedScore}`;
                    btn.appendChild(badge);
                }

                btn.onclick = () => preStartQuiz(lessonSlug);
                btnContainer.appendChild(btn);
            });
        }

        function startGeneralExam() {
            if (!checkName()) return; 

            isGeneralExam = true;
            isReviewMode = false;
            isEmptyReviewMode = false;
            currentQuestions = [];
            selectedLesson = 'general_exam'; 

            let pool = [...allQuestions];
            pool.sort(() => Math.random() - 0.5);
            currentQuestions = pool.slice(0, 20);
            
            if (currentQuestions.length === 0) {
                alert("Yeterli soru bulunamadƒ±.");
                return;
            }

            userAnswers = new Array(currentQuestions.length).fill(null);
            currentIndex = 0; score = 0;
            
            setupQuizUI();
            
            timeLeft = currentQuestions.length * 10;
            startGlobalTimer(); 
            loadQuestion();
        }

        function preStartQuiz(lessonSlug) {
            if (!checkName()) return; 

            isGeneralExam = false; 
            selectedLesson = lessonSlug;
            document.getElementById('timer-modal').style.display = 'flex';
        }

        function confirmStart(enableTimer) {
            document.getElementById('timer-modal').style.display = 'none';
            startQuiz(selectedLesson);
        }

        function startQuiz(lessonSlug) {
            isReviewMode = false;
            isEmptyReviewMode = false;
            currentQuestions = allQuestions.filter(q => q.lesson === lessonSlug);
            
            if (currentQuestions.length === 0) {
                alert("Bu kategoride soru bulunamadƒ±.");
                return;
            }

            userAnswers = new Array(currentQuestions.length).fill(null);
            currentIndex = 0; score = 0;
            
            setupQuizUI();
            
            timeLeft = currentQuestions.length * 10;
            startGlobalTimer();
            loadQuestion();
        }

        function setupQuizUI() {
            document.getElementById('home-screen').classList.remove('active');
            document.getElementById('quiz-screen').classList.add('active');
            document.getElementById('result-screen').classList.remove('active');
            
            document.getElementById('review-banner').style.display = 'none';
            document.getElementById('score-display').parentElement.style.visibility = 'hidden';
            document.getElementById('back-to-results-btn').style.display = 'none';
            document.getElementById('next-btn').innerText = "Sonraki Soru ‚û°Ô∏è";
        }

        function loadQuestion() {
            let qIndex = currentIndex;
            if (isReviewMode && isSequentialReview) {
                if (!wrongQuestionIndices || wrongQuestionIndices.length === 0 || reviewStep >= wrongQuestionIndices.length) {
                    returnToResults();
                    return;
                }
                qIndex = wrongQuestionIndices[reviewStep];
            } else if (isEmptyReviewMode) {
                if (!emptyIndicesToReview || emptyIndicesToReview.length === 0 || emptyReviewStep >= emptyIndicesToReview.length) {
                    isEmptyReviewMode = false;
                    checkFinish();
                    return;
                }
                qIndex = emptyIndicesToReview[emptyReviewStep];
            } else if (isReviewMode) {
                qIndex = currentIndex;
            }

            const q = currentQuestions[qIndex];
            if (!q) {
                goHome();
                return;
            }
            
            if(!isReviewMode) currentIndex = qIndex;

            const selectedAnswer = userAnswers[qIndex]; 

            let questionLabel;
            if (isReviewMode && isSequentialReview) {
                 questionLabel = `[Hatalƒ± Soru ${reviewStep + 1}/${wrongQuestionIndices.length}] `;
            } else if (isEmptyReviewMode) {
                 questionLabel = `[Bo≈ü Soru ${emptyReviewStep + 1}/${emptyIndicesToReview.length}] `;
            } else if (isReviewMode) {
                 questionLabel = `[ƒ∞nceleme: ${qIndex + 1}] `;
            } else {
                 questionLabel = `${qIndex + 1}) `;
            }
            
            document.getElementById('question-text').innerHTML = questionLabel + q.text;

            if (!isReviewMode) {
                updateTimerDisplay();
                document.getElementById('time-display').style.visibility = 'visible';
                document.getElementById('time-display').style.color = "var(--danger)"; 
            } else {
                if(timer) clearInterval(timer);
                document.getElementById('time-display').style.visibility = 'hidden';
            }
            
            let total = currentQuestions.length;
            let current = qIndex;
            
            if (isReviewMode && isSequentialReview) {
                total = wrongQuestionIndices.length; current = reviewStep;
            } else if (isEmptyReviewMode) {
                total = emptyIndicesToReview.length; current = emptyReviewStep;
            }
            
            const percent = total > 0 ? (current / total) * 100 : 0;
            document.getElementById('progress-fill').style.width = `${percent}%`;

            const container = document.getElementById('options-container');
            container.innerHTML = '';
            const letters = ['A', 'B', 'C', 'D'];
            
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'btn btn-option';
                
                const textSpan = document.createElement('span');
                textSpan.innerHTML = `<b>${letters[idx]})</b> ${opt}`; 
                btn.appendChild(textSpan);
                
                if (isReviewMode) {
                    btn.disabled = true;
                    if (idx === q.correct) btn.classList.add('correct-review');
                    if (selectedAnswer === idx && idx !== q.correct) btn.classList.add('wrong-review');
                } else {
                    if (selectedAnswer === idx) btn.classList.add('selected');
                    btn.onclick = () => selectAnswer(qIndex, idx);
                }
                container.appendChild(btn);
            });
            
            if (isEmptyReviewMode) {
                 document.getElementById('prev-btn').disabled = (emptyReviewStep === 0);
            } else {
                 document.getElementById('prev-btn').disabled = (currentIndex === 0 && !isSequentialReview) || (isSequentialReview && reviewStep === 0);
            }
            
            let nextText = "Sonraki Soru ‚û°Ô∏è";
            if (isEmptyReviewMode) {
                if(emptyReviewStep === emptyIndicesToReview.length - 1) nextText = "Ma√ßƒ± Bitir üèÅ";
            } else if ((!isSequentialReview && currentIndex === currentQuestions.length - 1) || (isSequentialReview && reviewStep === wrongQuestionIndices.length - 1)) {
                if(isReviewMode) nextText = "Sonu√ßlara D√∂n";
                else nextText = "Ma√ßƒ± Bitir üèÅ"; 
            }
            document.getElementById('next-btn').innerText = nextText;
        }

        function startGlobalTimer() {
            if (timer) clearInterval(timer);
            isTimerRunning = true;
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    isTimerRunning = false;
                    alert("‚è±Ô∏è S√ºre Bitti! Ma√ß sona erdi.");
                    endQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            let display = (m < 10 ? "0" + m : m) + ":" + (s < 10 ? "0" + s : s);
            document.getElementById('time-display').innerText = display;
        }

        function selectAnswer(qIndex, idx) {
            if (timeLeft <= 0) return;

            userAnswers[qIndex] = idx;
            const buttons = document.querySelectorAll('.btn-option');
            buttons.forEach((b, i) => {
                b.classList.remove('selected');
                if (i === idx) b.classList.add('selected');
            });
        }

        function prevQuestion() {
            if (isReviewMode && isSequentialReview) {
                if (reviewStep > 0) { reviewStep--; loadQuestion(); }
            } else if (isEmptyReviewMode) {
                if (emptyReviewStep > 0) { emptyReviewStep--; loadQuestion(); }
            } else {
                if (currentIndex > 0) { currentIndex--; loadQuestion(); }
            }
        }

        function nextQuestion() {
            if (isReviewMode && isSequentialReview) {
                if (reviewStep < wrongQuestionIndices.length - 1) { reviewStep++; loadQuestion(); }
                else { returnToResults(); }
            } else if (isEmptyReviewMode) {
                if (emptyReviewStep < emptyIndicesToReview.length - 1) { 
                    emptyReviewStep++; loadQuestion(); 
                } else { 
                    isEmptyReviewMode = false;
                    checkFinish(); 
                }
            } else {
                if (currentIndex < currentQuestions.length - 1) { currentIndex++; loadQuestion(); }
                else checkFinish();
            }
        }

        function checkFinish() {
            const hasEmpty = userAnswers.includes(null) || userAnswers.includes(undefined);
            if (hasEmpty) {
                document.getElementById('finish-warning-modal').style.display = 'flex';
            } else {
                endQuiz();
            }
        }

        function goToFirstEmpty() {
            document.getElementById('finish-warning-modal').style.display = 'none';
            
            emptyIndicesToReview = userAnswers.map((ans, idx) => (ans === null || ans === undefined) ? idx : -1).filter(idx => idx !== -1);
            
            if (emptyIndicesToReview.length > 0) {
                isEmptyReviewMode = true;
                emptyReviewStep = 0;
                loadQuestion();
            } else {
                endQuiz();
            }
        }

        function finishExamForce() {
            document.getElementById('finish-warning-modal').style.display = 'none';
            endQuiz();
        }

        function endQuiz() {
            clearInterval(timer);
            document.getElementById('quiz-screen').classList.remove('active');
            document.getElementById('result-screen').classList.add('active');
            
            let correctCount = 0; let wrongCount = 0; let emptyCount = 0;
            score = 0;
            wrongQuestionIndices = []; 

            const listContainer = document.getElementById('result-list-container');
            listContainer.innerHTML = ''; 

            userAnswers.forEach((ans, index) => {
                const q = currentQuestions[index];
                
                const item = document.createElement('div');
                item.className = 'q-result-item';
                item.innerText = index + 1;
                item.onclick = () => enterReviewMode(index); 

                if (ans === null || ans === undefined) {
                    emptyCount++;
                    item.classList.add('empty');
                } else if (ans === q.correct) {
                    correctCount++;
                    score += q.points;
                    item.classList.add('correct');
                } else {
                    wrongCount++;
                    item.classList.add('wrong');
                    wrongQuestionIndices.push(index); 
                }
                listContainer.appendChild(item);
            });

            document.getElementById('res-correct').innerText = correctCount;
            document.getElementById('res-wrong').innerText = wrongCount;
            document.getElementById('res-empty').innerText = emptyCount;
            document.getElementById('final-score').innerText = score;
            
            saveResult(selectedLesson, score);

            let categoryName = "Kategori";
            if (selectedLesson === 'general_exam') {
                categoryName = "Karƒ±≈üƒ±k Sƒ±nav";
            } else {
                const q = allQuestions.find(q => q.lesson === selectedLesson);
                if(q) categoryName = q.lessonDisplay;
            }

            saveScoreToCloud(playerName, score, categoryName);

            const wrongBox = document.getElementById('wrong-box');
            if (wrongCount > 0) {
                wrongBox.onclick = startReview; 
                wrongBox.style.cursor = "pointer";
            } else {
                wrongBox.onclick = null;
                wrongBox.style.cursor = "default";
            }

            const msg = document.getElementById('feedback-text');
            const ratio = score / (currentQuestions.length * 10);
            if (ratio >= 0.9) msg.innerText = "≈ûampiyonlar Ligi Seviyesi! üèÜ";
            else if (ratio >= 0.7) msg.innerText = "S√ºper Lig'de Oynarsƒ±n! ü•á";
            else if (ratio >= 0.5) msg.innerText = "Antrenmanlara Devam Et! ‚öΩ";
            else msg.innerText = "Amat√∂r K√ºme... Biraz daha √ßalƒ±≈ümalƒ±sƒ±n. üèÉ‚Äç‚ôÇÔ∏è";
        }

        function enterReviewMode(index) {
            isReviewMode = true;
            isSequentialReview = false; 
            currentIndex = index; 
            
            document.getElementById('result-screen').classList.remove('active');
            document.getElementById('quiz-screen').classList.add('active');
            
            document.getElementById('review-banner').style.display = 'block';
            document.getElementById('back-to-results-btn').style.display = 'block';
            
            loadQuestion();
        }

        function startReview() {
            if (wrongQuestionIndices.length === 0) return;
            isReviewMode = true;
            isSequentialReview = true; 
            reviewStep = 0;
            
            document.getElementById('result-screen').classList.remove('active');
            document.getElementById('quiz-screen').classList.add('active');
            
            document.getElementById('review-banner').style.display = 'block';
            document.getElementById('back-to-results-btn').style.display = 'block';
            
            loadQuestion();
        }

        function returnToResults() {
            document.getElementById('quiz-screen').classList.remove('active');
            document.getElementById('result-screen').classList.add('active');
        }

        function openHomeModal() {
            document.getElementById('home-confirm-modal').style.display = 'flex';
        }

        function closeHomeModal() {
            document.getElementById('home-confirm-modal').style.display = 'none';
        }

        function goHomeForce() {
            closeHomeModal();
            goHome();
        }

        function goHome() {
            clearInterval(timer); isReviewMode = false;
            document.getElementById('quiz-screen').classList.remove('active');
            document.getElementById('result-screen').classList.remove('active');
            document.getElementById('home-screen').classList.add('active');
            initApp(); 
        }

        function useDemoData() {
            allQuestions = [
                { lesson: 'super-lig', lessonDisplay: 'S√ºper Lig', text: 'DEMO: Hangi takƒ±m S√ºper Lig ≈üampiyonu olmamƒ±≈ütƒ±r?', options: ['Bursaspor','Ba≈üak≈üehir','Trabzonspor','Eski≈üehirspor'], correct: 3, time: 10, hintText: 'Kƒ±rmƒ±zƒ± ≈üim≈üekler hi√ß ≈üampiyon olmadƒ±.', points: 10 },
                { lesson: 'dunya-kupasi', lessonDisplay: 'D√ºnya Kupasƒ±', text: 'DEMO: En √ßok D√ºnya Kupasƒ± kazanan √ºlke?', options: ['Almanya','Brezilya','ƒ∞talya','Arjantin'], correct: 1, time: 10, hintText: 'Sambacƒ±lar!', points: 10 }
            ];
            initApp();
        }
    </script>
</body>
</html>
